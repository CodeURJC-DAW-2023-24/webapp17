{{>header}}
<link rel="stylesheet" href="../css/style.css">

<body>
    <div id="content">
        <div id="left">
            <div class="pagenav">
                {{#hasPrevious}}
                    <a href="?page={{previousPage}}&size={{size}}">PÃ¡gina Anterior</a>
                {{/hasPrevious}}
            
                {{#hasNext}}
                    <a href="?page={{nextPage}}&size={{size}}">Mostrar mÃ¡s posts</a>
                {{/hasNext}}
            </div>
            {{#posts.content}}
            <div class="entry" style="border: 1px solid #ddd; border-radius: 12px; padding: 20px; margin-bottom: 30px; background-color: #f9f9f9; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06); transition: transform 0.2s;">
                <h2 style="color: #2c3e50;">ğŸ“Œ {{title}}</h2>
            
                {{#image}}
                <img class="entryphoto" src="{{image}}" style="max-width: 100%; height: auto; border-radius: 10px; margin-bottom: 10px;" />
                {{/image}}
            
                <p style="font-size: 16px; color: #333;">{{content}}</p>
            
                <p class="meta" style="font-size: 14px; color: #666;">
                    ğŸ“… <span class="date">{{date}}</span> | ğŸ‘¤ Posted by {{#usr}}{{username}}{{/usr}} | ğŸ·ï¸ Tags: {{tag}} | ğŸ’¬ {{comments.size}} comentarios
                </p>
            
                <!-- BotÃ³n para desplegar los comentarios asociados -->
<button class="button" onclick="toggleComments('{{id}}')" style="background-color: #3498db; color: white; padding: 8px 14px; border-radius: 8px; border: none; margin-bottom: 10px;">
    ğŸ’¬ Ver Comentarios
</button>

<!-- Lista de comentarios (inicialmente oculta) -->
<div id="comments_{{id}}" class="comments-container" style="margin-top: 10px; max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, opacity 0.5s ease-out; opacity: 0;">
    {{#comments}}
    <div class="comment" style="background-color: #eef6ff; border-left: 4px solid #3498db; padding: 10px; border-radius: 6px; margin-bottom: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <p style="margin: 0;">ğŸ—¨ï¸ <strong>{{text}}</strong></p>
        <p class="meta" style="font-size: 12px; color: #555;">ğŸ‘¤ {{#usr}}{{username}}{{/usr}}</p>

        {{#ADMIN}}
        <form action="/{{id}}/delete_comment" method="POST" style="margin-top: 5px;">
            <button class="button secondary" type="submit" style="font-size: 10px; background-color: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 5px;">âŒ Borrar comentario</button>
        </form>
        {{/ADMIN}}

        {{#currentUser.username == usr.username}}
        <form action="/{{id}}/delete_comment" method="POST" style="margin-top: 5px;">
            <button class="button secondary" type="submit" style="font-size: 10px; background-color: #e67e22; color: white; border: none; padding: 4px 8px; border-radius: 5px;">ğŸ—‘ï¸ Eliminar comentario</button>
        </form>
        {{/currentUser.username == usr.username}}
    </div>
    {{/comments}}
</div>

<script>
  function toggleComments(id) {
    const container = document.getElementById('comments_' + id);
    if (container.style.maxHeight && container.style.maxHeight !== '0px') {
      container.style.maxHeight = '0px';
      container.style.opacity = 0;
    } else {
      container.style.maxHeight = container.scrollHeight + 'px';
      container.style.opacity = 1;
    }
  }
</script>

            
                {{#ADMIN}}
                <form action="/{{id}}/delete" method="POST" style="margin-top: 10px;">
                    <button class="button danger" type="submit" style="background-color: #c0392b; color: white; padding: 6px 12px; border: none; border-radius: 6px;">ğŸ—‘ï¸ Borrar Post</button>
                </form>
                {{/ADMIN}}
            
                <!-- Formulario para agregar un comentario -->
                {{#currentUser}}
                <form action="/{{id}}/comment" method="POST" style="margin-top: 10px;">
                    <textarea name="comment" rows="3" cols="50" placeholder="ğŸ–Šï¸ Escribe tu comentario aquÃ­..." style="width: 100%; border-radius: 6px; padding: 8px;"></textarea><br>
                    <button class="button" type="submit" style="background-color: #2ecc71; color: white; border: none; padding: 8px 14px; border-radius: 8px;">ğŸ’¬ Comentar</button>
                </form>
                {{/currentUser}}
            
                {{#currentUser.username == usr.username}}
                <form action="/{{id}}/delete" method="POST" style="margin-top: 10px;">
                    <button class="button danger" type="submit" style="background-color: #d35400; color: white; padding: 6px 12px; border-radius: 6px;">ğŸ—‘ï¸ Borrar mi Post</button>
                </form>
                {{/currentUser.username == usr.username}}
            </div>
            {{/posts.content}}
            

        {{#ADMIN}}
        <h1>ğŸ“ Publica un nuevo Post</h1>
<form action="/create-post" method="POST" enctype="multipart/form-data" style="max-width: 500px; text-align: left; padding: 10px;">
    
    <label for="title">ğŸ“Œ TÃ­tulo:</label><br>
    <input type="text" name="title" style="width: 100%; padding: 5px; margin-bottom: 10px;"><br>

    <label for="tag">ğŸ·ï¸ TemÃ¡tica:</label><br>
    <input type="text" name="tag" style="width: 100%; padding: 5px; margin-bottom: 10px;"><br>

    <label for="content">ğŸ—’ï¸ Contenido:</label><br>
    <textarea name="content" rows="4" style="width: 100%; padding: 5px; margin-bottom: 10px;"></textarea><br>

    <label for="imageName">ğŸ–¼ï¸ Nombre de la imagen:</label><br>
    <input type="text" name="imageName" style="width: 100%; padding: 5px; margin-bottom: 10px;"><br>

    <label for="image">ğŸ“· Archivo de imagen (.jpg/.jpeg):</label><br>
    <input type="file" name="image" accept=".jpg, .jpeg" style="margin-bottom: 15px;"><br>

    <button class="button" type="submit" value="Save" style="padding: 10px 20px; background-color: #4CAF50; color: white; border-radius: 8px; border: none; cursor: pointer;">
        ğŸš€ Crear Post
    </button>
</form>
        <br><hr style="width: 100%; border-top: 1px dashed #ccc;"><br>
        <h1>ğŸ¤– Genera un nuevo Post</h1>
        <form action="/generate-post" method="POST" enctype="multipart/form-data" style="max-width: 500px; text-align: left; padding: 10px;">
            
            <label for="tag">ğŸ·ï¸ TemÃ¡tica:</label><br>
            <input type="text" name="tag" style="width: 100%; padding: 5px; margin-bottom: 10px;"><br>
        
            <button class="button" type="submit" style="padding: 10px 20px; background-color:rgb(17, 61, 218); color: white; border-radius: 8px; border: none; cursor: pointer;">
                âœ¨ Autogenerar Post
            </button>
        </form>
        {{/ADMIN}}

        

        </div>
        
        <div id="right" style="background: linear-gradient(135deg, #f0f8ff, #e6f7ff); padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); max-width: 600px; font-family: 'Segoe UI', sans-serif; animation: fadeIn 1s ease-out;">
    
            <h2 style="color: #005a9c; font-size: 28px; margin-bottom: 10px;">ğŸ‘¥ Â¿QuiÃ©nes somos?</h2>
            
            <p class="intro" style="font-size: 16px; line-height: 1.6; color: #333;">
                ğŸ’» <strong>El rincÃ³n del software</strong> es una plataforma en lÃ­nea donde los usuarios pueden discutir,
                intercambiar ideas y resolver problemas relacionados con el desarrollo, la programaciÃ³n y el uso de software.
                <br><br>
                ğŸ¤ Estos foros proporcionan un espacio para que <em>desarrolladores, ingenieros de software y entusiastas de la tecnologÃ­a</em> compartan sus experiencias, consejos y soluciones tÃ©cnicas.
                <br><br>
                ğŸ“š Los temas de discusiÃ³n pueden variar desde preguntas especÃ­ficas sobre <code>lenguajes de programaciÃ³n</code> hasta debates sobre las Ãºltimas tendencias en tecnologÃ­a.
                <br><br>
                ğŸŒ Los foros de software suelen ser comunidades activas y colaborativas donde puedes obtener ayuda, aprender nuevas habilidades y participar en debates sobre diversos aspectos del mundo del software.
            </p>
        
        </div>
        
        <!-- ğŸ¬ AnimaciÃ³n opcional (puedes ponerla en tu CSS global) -->
        <style>
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        </style>
    </div>
</body>
{{>footer}}
